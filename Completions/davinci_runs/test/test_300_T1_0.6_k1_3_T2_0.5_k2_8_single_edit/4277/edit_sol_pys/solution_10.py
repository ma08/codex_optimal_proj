import sys
from collections import deque
from itertools import combinations
from copy import deepcopy
input = sys.stdin.readline

N, K = map(int, input().split())

arr = [list(map(int, input().split())) for _ in range(N)]

for i in range(N):
    for j in range(N):
        for k in range(N):
            arr[i][j] = min(arr[i][j], arr[i][k] + arr[k][j])

ans = 0

for i in range(1, N):
    for j in range(1, N):
        if i == j:
            continue
        if arr[0][i] + arr[0][j] + arr[i][j] <= K:
            ans = max(ans, arr[0][i] + arr[0][j] + arr[i][j])
print(ans)



































































































































































































































































































































































































































































































































































































































































































































































































































































































