["import sys\n\n\ndef main():\n    # Read input\n    events = []\n    for line in sys.stdin:\n        events.append(line.strip().split())\n\n    # Initialize variables\n    num_shares = 0   # number of shares\n    total_cost = 0   # total cost\n    total_sale = 0   # total sale\n    num_sold = 0     # number of shares sold\n    avg_cost = 0     # average cost\n    avg_sale = 0     # average sale\n    tax_rate = 0.3\n\n    # Process events\n    for event in events:\n        if event[0] == 'buy':\n            num_shares += int(event[1])\n            total_cost += int(event[1]) * int(event[2])\n        elif event[0] == 'sell':\n            num_shares -= int(event[1])\n            avg_sale = int(event[2])\n            total_sale += avg_sale * int(event[1])\n            num_sold += int(event[1])\n        elif event[0] == 'split':\n            num_shares *= int(event[1])\n            total_cost *= int(event[1])\n        elif event[0] == 'merge':\n            num_shares = num_shares // int(event[1])\n            total_cost //= int(event[1])\n        elif event[0] == 'die':\n            avg_cost = total_cost // num_shares\n            avg_sale = int(event[1])\n            total_sale += avg_sale * (num_shares - num_sold)\n            total_sale -= total_sale * tax_rate\n            break\n\n    print(total_sale)\n\nif __name__ == \"__main__\":\n    main()\n", "\n\ndef main():\n    shares = []\n    for i in range(int(input())):\n        temp = input().split()\n        if temp[0] == \"buy\":\n            shares.append(int(temp[1]) * int(temp[2]))\n        elif temp[0] == \"sell\":\n            shares.sort()\n            for j in range(int(temp[1])):\n                shares[j] = int(temp[2]) - shares[j]\n        elif temp[0] == \"split\":\n            temp2 = []\n            for j in shares:\n                temp2.append(j/int(temp[1]))\n            shares = temp2\n        elif temp[0] == \"merge\":\n            temp2 = []\n            for j in range(int(len(shares)//int(temp[1]))):\n                temp2.append(sum(shares[j*int(temp[1]):(j+1)*int(temp[1])]))\n            if len(shares)%int(temp[1]) != 0:\n                temp2.append(sum(shares[int(len(shares)//int(temp[1]))*int(temp[1]):]))\n            shares = temp2\n        else:\n            shares = [int(temp[1]) - i for i in shares]\n    print(sum(shares) / len(shares))\n\nmain()\n", "\n\ndef main():\n    # read the input file\n    f = open(\"grumpy_old_cat.txt\", \"r\")\n    # get the number of lines\n    lines = f.readlines()\n    # initialize the total number of shares to 0\n    total_shares = 0\n    # initialize the average cost per share to 0\n    average_cost = 0\n    # initialize the stock price to 0\n    stock_price = 0\n    # iterate through the lines\n    for line in lines:\n        # split the line into a list\n        line_list = line.split()\n        # if the line starts with \"buy\"\n        if line_list[0] == \"buy\":\n            # update the total number of shares\n            total_shares += int(line_list[1])\n            # update the average cost per share\n            average_cost = (average_cost*(total_shares-int(line_list[1]))+int(line_list[1])*int(line_list[2]))//total_shares\n        # if the line starts with \"sell\"\n        elif line_list[0] == \"sell\":\n            # update the total number of shares\n            total_shares -= int(line_list[1])\n        # if the line starts with \"split\"\n        elif line_list[0] == \"split\":\n            # update the total number of shares\n            total_shares *= int(line_list[1])\n            # update the average cost per share\n            average_cost /= int(line_list[1])\n        # if the line starts with \"merge\"\n        elif line_list[0] == \"merge\":\n            # update the total number of shares\n            total_shares //= int(line_list[1])\n            # update the average cost per share\n            average_cost = average_cost*int(line_list[1])\n        # if the line starts with \"die\"\n        elif line_list[0] == \"die\":\n            # update the stock price\n            stock_price = int(line_list[1])\n    # calculate the final sale\n    final_sale = total_shares*(stock_price - average_cost*0.3)\n    # print the final sale\n    print(\"%.8f\" % final_sale)\n\nmain()\n", "\n\ndef main():\n    # read the input file\n    f = open(\"grumpy_old_cat.txt\", \"r\")\n    # get the number of lines\n    lines = f.readlines()\n    # initialize the total number of shares to 0\n    total_shares = 0\n    # initialize the average cost per share to 0\n    average_cost = 0\n    # initialize the stock price to 0\n    stock_price = 0\n    # iterate through the lines\n    for line in lines:\n        # split the line into a list\n        line_list = line.split()\n        # if the line starts with \"buy\"\n        if line_list[0] == \"buy\":\n            # update the total number of shares\n            total_shares += int(line_list[1])\n            # update the average cost per share\n            average_cost = (average_cost*(total_shares-int(line_list[1])) + int(line_list[1])*int(line_list[2]))/total_shares\n        # if the line starts with \"sell\"\n        elif line_list[0] == \"sell\":\n            # update the total number of shares\n            total_shares -= int(line_list[1])\n        # if the line starts with \"split\"\n        elif line_list[0] == \"split\":\n            # update the total number of shares\n            total_shares *= int(line_list[1])\n            # update the average cost per share\n            average_cost /= int(line_list[1])\n        # if the line starts with \"merge\"\n        elif line_list[0] == \"merge\":\n            # update the total number of shares\n            total_shares = total_shares // int(line_list[1])\n            # update the average cost per share\n            average_cost = average_cost * int(line_list[1])\n        # if the line starts with \"die\"\n        elif line_list[0] == \"die\":\n            # update the stock price\n            stock_price = int(line_list[1])\n    # calculate the final sale\n    final_sale = total_shares * (stock_price - average_cost * 0.3)\n    # print the final sale\n    print(\"%.8f\" % final_sale)\n\nmain()\n", "import sys\n\ndef main():\n    lines = sys.stdin.readlines()\n\n    # Parse the lines\n    commands = []\n    for line in lines:\n        # Split the line\n        line = line.strip().split()\n\n        # Parse the command\n        if line[0] == \"buy\":\n            commands.append([\"buy\", int(line[1]), int(line[2])])\n        elif line[0] == \"sell\":\n            commands.append([\"sell\", int(line[1]), int(line[2])])\n        elif line[0] == \"split\":\n            commands.append([\"split\", int(line[1])])\n        elif line[0] == \"merge\":\n            commands.append([\"merge\", int(line[1])])\n        elif line[0] == \"die\":\n            commands.append([\"die\", int(line[1])])\n        else:\n            print(\"Error: Invalid command\")\n            return\n\n    # Process the commands\n    shares = 0\n    total_cost = 0\n    total_price = 0\n    for command in commands:\n        if command[0] == \"buy\":\n            shares += command[1]\n            total_cost += command[1] * command[2]\n        elif command[0] == \"sell\":\n            shares -= command[1]\n            total_price += command[1] * command[2]\n        elif command[0] == \"split\":\n            shares *= command[1]\n            total_cost *= command[1]\n        elif command[0] == \"merge\":\n            if shares % command[1] != 0:\n                total_price += (shares % command[1]) * (total_cost / shares)\n                shares -= (shares % command[1])\n            shares //= command[1]\n            total_cost //= command[1]\n        elif command[0] == \"die\":\n            total_price += shares * command[1]\n            total_price -= total_price * 0.3\n            break\n\n    print(\"%.2f\" % total_price)\n\nmain()\n", "\ndef main():\n    shares = []\n    for i in range(int(input())):\n        temp = input().split()\n        if temp[0] == \"buy\":\n            shares.append(int(temp[1]) * int(temp[2]))\n        elif temp[0] == \"sell\":\n            shares.sort()\n            for j in range(int(temp[1])):\n                shares[j] = int(temp[2]) - shares[j]\n        elif temp[0] == \"split\":\n            temp2 = []\n            for j in shares:\n                temp2.append(j / int(temp[1]))\n            shares = temp2\n        elif temp[0] == \"merge\":\n            temp2 = []\n            for j in range(int(len(shares) // int(temp[1]))):\n                temp2.append(sum(shares[j * int(temp[1]):(j + 1) * int(temp[1])]))\n            if len(shares) % int(temp[1]) != 0:\n                temp2.append(sum(shares[int(len(shares) // int(temp[1])) * int(temp[1]):]))\n            shares = temp2\n        else:\n            shares = [int(temp[1]) - i for i in shares]\n    print(sum(shares) / len(shares))\n\n\nmain()\n", "\n\ndef main():\n    # read the input file\n    f = open(\"grumpy_old_cat.txt\", \"r\")\n    # get the number of lines\n    lines = f.readlines()\n    # initialize the total number of shares as 0\n    total_shares = 0\n    # initialize the average cost per share as 0\n    average_cost = 0\n    # initialize the stock price as 0\n    stock_price = 0\n    # iterate through the lines in the file\n    for line in lines:\n        # split the line into a list\n        line_list = line.split()\n        # if the line starts with \"buy\", update the total number of shares and the average cost per share\n        if line_list[0] == \"buy\":\n            total_shares += int(line_list[1])\n            # update the average cost per share\n            average_cost = (average_cost*(total_shares-int(line_list[1])) + int(line_list[1])*int(line_list[2]))/total_shares\n        # if the line starts with \"sell\"\n        elif line_list[0] == \"sell\":\n            # update the total number of shares\n            total_shares -= int(line_list[1])\n        # if the line starts with \"split\"\n        elif line_list[0] == \"split\":\n            # update the total number of shares\n            total_shares *= int(line_list[1])\n            # update the average cost per share\n            average_cost /= int(line_list[1])\n        # if the line starts with \"merge\"\n        elif line_list[0] == \"merge\":\n            # update the total number of shares\n            total_shares = total_shares // int(line_list[1])\n            # update the average cost per share\n            average_cost = average_cost * int(line_list[1])\n        # if the line starts with \"die\"\n        elif line_list[0] == \"die\":\n            # update the stock price\n            stock_price = int(line_list[1])\n    # calculate the final sale\n    final_sale = total_shares * (stock_price - average_cost * 0.3)\n    # print the final sale\n    print(\"%.8f\" % final_sale)\n\nmain()\n", "\nimport sys\n\ndef main():\n    events = []\n    for line in sys.stdin:\n        args = line.split()\n        events.append(args)\n\n    shares_owned = 0\n    share_cost = 0.0\n    for event in events:\n        if event[0] == \"buy\":\n            shares_owned += int(event[1])\n            share_cost = (share_cost * (shares_owned - int(event[1])) + int(event[1]) * float(event[2])) / shares_owned\n        elif event[0] == \"sell\":\n            shares_owned -= int(event[1])\n        elif event[0] == \"split\":\n            shares_owned *= int(event[1])\n            share_cost /= int(event[1])\n        elif event[0] == \"merge\":\n            shares_owned = (shares_owned / int(event[1])) + (shares_owned % int(event[1]))\n            share_cost *= int(event[1])\n        elif event[0] == \"die\":\n            share_cost = float(event[1])\n            break\n\n    print(shares_owned * share_cost * (1 - 0.3))\n\nmain()\n", "\n\ndef main():\n    events = []\n    while True:\n        event = input().split()\n        if event[0] == \"die\":  # end of input\n            events.append(event)\n            break\n        else:  # add event to list\n            events.append(event)\n\n    stock = 0  # stock number\n    cost = 0  # average cost\n    for event in events:\n        if event[0] == \"buy\":  # buy stock\n            stock += int(event[1])\n            cost += int(event[1]) * int(event[2])\n        elif event[0] == \"sell\":  # sell stock\n            stock -= int(event[1])\n            cost -= int(event[1]) * int(event[2])\n        elif event[0] == \"split\":\n            stock *= int(event[1])\n            cost /= int(event[1])\n        elif event[0] == \"merge\":\n            stock //= int(event[1])\n            cost *= int(event[1])\n        elif event[0] == \"die\":\n            print(\"{:.8f}\".format(stock * int(event[1]) - stock * cost * 0.3))\n\nif __name__ == \"__main__\":\n    main()\n", "\n\nimport sys\n\ndef main():\n    # Reading the input\n    lines = sys.stdin.readlines()\n    lines = [line.strip() for line in lines]\n    # Initializing variables\n    num_shares = 0\n    cost_per_share = 0\n    # Iterating the events\n    for line in lines:\n        event = line.split()\n        # Buy event\n        if event[0] == 'buy':\n            num_shares += int(event[1])\n            cost_per_share += int(event[1]) * int(event[2])\n        # Sell event\n        elif event[0] == 'sell':\n            num_shares -= int(event[1])\n            cost_per_share -= int(event[1]) * int(event[2])\n        # Split event\n        elif event[0] == 'split':\n            num_shares *= int(event[1])\n            cost_per_share /= int(event[1])\n        # Merge event\n        elif event[0] == 'merge':\n            # Calculating how many shares will be merged\n            num_shares_to_merge = num_shares - (num_shares % int(event[1]))\n            num_shares -= num_shares_to_merge\n            cost_per_share = (cost_per_share * num_shares_to_merge) // int(event[1])\n            num_shares += 1\n        # Die event\n        elif event[0] == 'die':\n            # Calculating the final sum after taxes\n            final_sum = num_shares * (int(event[1]) - (0.3 * (int(event[1]) - cost_per_share / num_shares)))\n            print(final_sum)\n\nif __name__ == '__main__':\n    main()\n", "\n\ndef main():\n    # Read input\n    events = []\n    for line in sys.stdin:\n        events.append(line.strip().split())\n\n    # Initialize variables\n    num_shares = 0  # Number of shares.\n    total_cost = 0  # Total cost of shares.\n    total_sale = 0  # Total sale of shares.\n    num_sold = 0  # Number of shares sold.\n    avg_cost = 0  # Average cost of shares.\n    avg_sale = 0  # Average sale of shares.\n    tax_rate = 0.3\n\n    # Process events\n    for event in events:\n        if event[0] == 'buy':\n            num_shares += int(event[1])\n            total_cost += int(event[1]) * int(event[2])\n        elif event[0] == 'sell':\n            num_shares -= int(event[1])\n            avg_sale = (int(event[1]) * int(event[2])) / int(event[1])  # Average sale of shares.\n            total_sale += avg_sale * int(event[1])\n            num_sold += int(event[1])\n        elif event[0] == 'split':\n            num_shares *= int(event[1])\n            total_cost = total_cost * int(event[1])\n        elif event[0] == 'merge':\n            num_shares = num_shares // int(event[1])\n            total_cost = total_cost // int(event[1])\n        elif event[0] == 'die':\n            avg_cost = total_cost / num_shares  # Average cost of shares.\n            avg_sale = int(event[1])\n            total_sale += avg_sale * (num_shares - num_sold)\n            total_sale -= total_sale * tax_rate  # Tax rate.\n            break\n\n    print(total_sale)\n\nif __name__ == \"__main__\":\n    main()\n", "\n\ndef main():\n    # read the input file\n    f = open(\"grumpy_old_cat.txt\", \"r\")\n    # get the number of lines\n    lines = f.readlines()\n    # initialize the total number of shares as 0\n    total_shares = 0\n    # initialize the average cost per share as 0\n    average_cost = 0\n    # initialize the stock price as 0\n    stock_price = 0\n    # iterate through the lines in the file\n    for line in lines:\n        # split the line into a list\n        line_list = line.split()\n        # if the line starts with \"buy\", update the total number of shares and the average cost per share\n        if line_list[0] == \"buy\":\n            total_shares += int(line_list[1])\n            # update the average cost per share\n            average_cost = (average_cost*(total_shares-int(line_list[1]))+int(line_list[1])*int(line_list[2])) / total_shares\n        # if the line starts with \"sell\"\n        elif line_list[0] == \"sell\":\n            # update the total number of shares\n            total_shares -= int(line_list[1])\n        # if the line starts with \"split\"\n        elif line_list[0] == \"split\":\n            # update the total number of shares\n            total_shares *= int(line_list[1])\n            # update the average cost per share\n            average_cost /= int(line_list[1])\n        # if the line starts with \"merge\"\n        elif line_list[0] == \"merge\":\n            # update the total number of shares\n            total_shares = total_shares // int(line_list[1])\n            # update the average cost per share\n            average_cost = average_cost * int(line_list[1])\n        # if the line starts with \"die\"\n        elif line_list[0] == \"die\":\n            # update the stock price\n            stock_price = int(line_list[1])\n    # calculate the final sale\n    final_sale = total_shares * (stock_price - average_cost * 0.3)\n    # print the final sale\n    print(\"%.8f\" % final_sale)\n\nmain()\n", "\n\ndef main():\n    events = []\n    while True:\n        event = input().split()\n        if event[0] == \"die\":\n            events.append(event)\n            break\n        else:\n            events.append(event)\n\n    stock = 0\n    cost = 0\n    for event in events:\n        if event[0] == \"buy\":\n            stock += int(event[1])\n            cost += int(event[1]) * int(event[2])\n        elif event[0] == \"sell\":\n            stock -= int(event[1])\n            cost -= int(event[1]) * int(event[2])\n        elif event[0] == \"split\":\n            stock *= int(event[1])\n            cost /= int(event[1])\n        elif event[0] == \"merge\":\n            stock = stock // int(event[1])\n            cost = cost * int(event[1])\n        elif event[0] == \"die\":\n            print(\"{:.8f}\".format(stock * int(event[1]) - stock * cost * 0.3))\n\nif __name__ == \"__main__\":\n    main()\n", "\n\ndef main():\n    shares = []\n    for i in range(int(input())):\n        temp = input().split()\n        if temp[0] == \"buy\":\n            shares.append(int(temp[1]) * int(temp[2]))\n        elif temp[0] == \"sell\":\n            shares.sort()\n            for j in range(int(temp[1])):\n                shares[j] = int(temp[2]) - shares[j]\n        elif temp[0] == \"split\":\n            temp2 = []\n            for j in shares:\n                temp2.append(j/int(temp[1]))\n            shares = temp2\n        elif temp[0] == \"merge\":\n            temp2 = []\n            for j in range(int(len(shares)/int(temp[1]))):\n                temp2.append(sum(shares[j*int(temp[1]):(j+1)*int(temp[1])]))\n            if len(shares)%int(temp[1]) != 0:\n                temp2.append(sum(shares[int(len(shares)/int(temp[1]))*int(temp[1]):]))\n            shares = temp2\n        else:\n            shares = [int(temp[1]) - i for i in shares]\n    print(round(sum(shares)/len(shares), 2))\n\nif __name__ == '__main__':\n    main()\n", "\n\nfrom sys import stdin\n\ndef main():\n    events = []\n    for line in stdin:\n        events.append(line.strip().split())\n    total = 0\n    numShares = 0\n    for event in events:\n        if event[0] == \"buy\":\n            numShares += int(event[1])\n            total += int(event[1]) * int(event[2])\n        if event[0] == \"sell\":\n            numShares -= int(event[1])\n            total -= int(event[1]) * int(event[2])\n        if event[0] == \"split\":\n            numShares *= int(event[1])\n            total *= int(event[1])\n        if event[0] == \"merge\":\n            numShares //= int(event[1])\n            total //= int(event[1])\n            if numShares % int(event[1]):\n                numShares -= numShares % int(event[1])\n                total -= total % int(event[1])\n        if event[0] == \"die\":\n            total -= total * 0.3\n            total += numShares * int(event[1])\n    print(format(total, \".8f\"))\n\nif __name__ == \"__main__\":\n    main()\n", "\n\nimport sys\n\ndef main():\n    # Reading in the input\n    lines = sys.stdin.readlines()\n    lines = [line.strip() for line in lines]\n    # Initializing variables\n    num_shares = 0\n    cost_per_share = 0\n    # Iterating through the events.\n    for line in lines:\n        event = line.split()\n        # Buy event\n        if event[0] == 'buy':\n            num_shares += int(event[1])\n            cost_per_share += int(event[1]) * float(event[2])\n        # Sell event\n        elif event[0] == 'sell':\n            num_shares -= int(event[1])\n            cost_per_share -= int(event[1]) * float(event[2])\n        # Split event\n        elif event[0] == 'split':\n            num_shares *= int(event[1])\n            cost_per_share /= int(event[1])\n        # Merge event\n        elif event[0] == 'merge':\n            # Calculate how many shares will be merged\n            num_shares_to_merge = num_shares - (num_shares % int(event[1]))\n            num_shares -= num_shares_to_merge\n            cost_per_share = (cost_per_share * num_shares_to_merge) / float(event[1])\n            num_shares += 1\n        # Die event\n        elif event[0] == 'die':\n            # Calculate the final sum after taxes\n            final_sum = num_shares * (float(event[1]) - (0.3 * (float(event[1]) - cost_per_share / num_shares)))\n            print(final_sum)\n\nif __name__ == '__main__':\n    main()\n", "\nfrom sys import stdin\n\ndef main():\n    events = []\n    for line in stdin:\n        events.append(line.strip().split())\n    total = 0\n    numShares = 0\n    for event in events:\n        if event[0] == \"buy\":\n            numShares += int(event[1])\n            total += int(event[1]) * int(event[2])\n        if event[0] == \"sell\":\n            numShares -= int(event[1])\n            total -= int(event[1]) * int(event[2])\n        if event[0] == \"split\":\n            numShares *= int(event[1])\n            total *= int(event[1])\n        if event[0] == \"merge\":\n            numShares //= int(event[1])\n            total //= int(event[1])\n            if numShares % int(event[1]):\n                numShares -= numShares % int(event[1])\n                total -= total % int(event[1])\n        if event[0] == \"die\":\n            total -= total * 0.3\n            total += numShares * int(event[1])\n    print(format(total, \".8f\"))\n\nif __name__ == \"__main__\":\n    main()\n", "\nimport sys\n\ndef main():\n    # Read input\n    events = []\n    for line in sys.stdin:\n        events.append(line.strip().split())\n\n    # Initialize variables\n    num_shares = 0   # number of shares\n    total_cost = 0\n    total_sale = 0   # total sale\n    num_sold = 0     # number of shares sold\n    avg_cost = 0\n    avg_sale = 0     # average sale\n    tax_rate = 0.3\n\n    # Process events\n    for event in events:\n        if event[0] == 'buy':\n            num_shares += int(event[1])\n            total_cost += int(event[1]) * int(event[2])\n        elif event[0] == 'sell':\n            num_shares -= int(event[1])\n            avg_sale = (int(event[1]) * int(event[2])) / float(event[1])\n            total_sale += avg_sale * int(event[1])\n            num_sold += int(event[1])\n        elif event[0] == 'split':\n            num_shares *= float(event[1])\n            total_cost = total_cost * float(event[1])\n        elif event[0] == 'merge':\n            num_shares = num_shares // float(event[1])\n            total_cost = total_cost // float(event[1])\n        elif event[0] == 'die':\n            avg_cost = total_cost / num_shares\n            avg_sale = float(event[1])\n            total_sale += avg_sale * (num_shares - num_sold)\n            total_sale -= total_sale * tax_rate\n            break\n\n    print(total_sale)\n\nif __name__ == \"__main__\":\n    main()\n", "\n\nfrom sys import stdin\n\ndef main():\n    events = []\n    for line in stdin:\n        events.append(line.strip().split())\n    total = 0\n    numShares = 0\n    for event in events:\n        if event[0] == \"buy\": # buy shares\n            numShares += int(event[1])\n            total += int(event[1]) * int(event[2])\n        if event[0] == \"sell\": # sell shares\n            numShares -= int(event[1])\n            total -= int(event[1]) * int(event[2])\n        if event[0] == \"split\": # split shares\n            numShares *= int(event[1])\n            total *= int(event[1])\n        if event[0] == \"merge\": # merge shares\n            numShares //= int(event[1])\n            total //= int(event[1])\n            if numShares % int(event[1]):\n                numShares -= numShares % int(event[1])\n                total -= total % int(event[1])\n        if event[0] == \"die\": # die\n            total -= total * 0.3 # 30% tax\n            total += numShares * int(event[1])\n    print(format(total, \".8f\"))\n\nif __name__ == \"__main__\":\n    main()\n", "import sys\n\n\n\ndef main():\n    # Read input\n    events = []\n    for line in sys.stdin:\n        events.append(line.strip().split())\n\n    # Initialize variables\n    num_shares = 0  # Number of shares\n    total_cost = 0  # Total cost of shares\n    total_sale = 0  # Total sale of shares\n    num_sold = 0  # Number of shares sold\n    avg_cost = 0  # Average cost of shares\n    avg_sale = 0  # Average sale of shares\n    tax_rate = 0.3\n\n    # Process events\n    for event in events:\n        if event[0] == 'buy':\n            num_shares += int(event[1])\n            total_cost += int(event[1]) * int(event[2])\n        elif event[0] == 'sell':\n            num_shares -= int(event[1])\n            avg_sale = (int(event[1]) * int(event[2])) / int(event[1])\n            total_sale += avg_sale * int(event[1])\n            num_sold += int(event[1])\n        elif event[0] == 'split':\n            num_shares *= int(event[1])\n            total_cost = total_cost * int(event[1])\n        elif event[0] == 'merge':\n            num_shares = num_shares // int(event[1])\n            total_cost = total_cost // int(event[1])\n        elif event[0] == 'die':\n            avg_cost = total_cost / num_shares\n            avg_sale = int(event[1])\n            total_sale += avg_sale * (num_shares - num_sold)\n            total_sale -= total_sale * tax_rate\n            break\n\n    print(total_sale)\n\nif __name__ == \"__main__\":\n    main()\n", "\n\ndef main():\n    events = []\n    while True:\n        event = input().split()\n        if event[0] == \"die.\":\n            events.append(event)\n            break\n        else:\n            events.append(event)\n\n    stock = 0\n    cost = 0\n    for event in events:\n        if event[0] == \"buy\":\n            stock += int(event[1])\n            cost += int(event[1]) * int(event[2])\n        elif event[0] == \"sell\":\n            stock -= int(event[1])\n            cost -= int(event[1]) * int(event[2])\n        elif event[0] == \"split\":\n            stock *= int(event[1])\n            cost /= int(event[1])\n        elif event[0] == \"merge\":\n            stock //= int(event[1])\n            cost *= int(event[1])\n        elif event[0] == \"die.\":\n            print(\"{:.8f}\".format(stock * int(event[1]) - stock * cost * 0.3))\n\nif __name__ == \"__main__\":\n    main()\n", "\n\nimport sys\n\ndef main():\n    # Reading in the input\n    lines = sys.stdin.readlines()\n    lines = [line.strip() for line in lines]\n    # Initializing variables\n    num_shares = 0\n    cost_per_share = 0\n    # Iterating through the events.\n    for line in lines:\n        event = line.split()\n        # Buy event\n        if event[0] == 'buy':\n            num_shares += int(event[1])\n            cost_per_share += int(event[1]) * int(event[2])\n        # Sell event\n        elif event[0] == 'sell':\n            num_shares -= int(event[1])\n            cost_per_share -= int(event[1]) * int(event[2])\n        # Split event\n        elif event[0] == 'split':\n            num_shares *= int(event[1])\n            cost_per_share /= int(event[1])\n        # Merge event\n        elif event[0] == 'merge':\n            # Calculate how many shares will be merged\n            num_shares_to_merge = num_shares - (num_shares % int(event[1]))\n            num_shares -= num_shares_to_merge\n            cost_per_share = (cost_per_share * num_shares_to_merge) // int(event[1])\n            num_shares += 1\n        # Die event\n        elif event[0] == 'die':\n            # Calculate the final sum after taxes\n            final_sum = num_shares * (int(event[1]) - (0.3 * (int(event[1]) - cost_per_share // num_shares)))\n            print(final_sum)\n\nif __name__ == '__main__':\n    main()\n", "\n\nfrom sys import stdin\n\ndef main():\n    events = []\n    for line in stdin:\n        events.append(line.strip().split())\n    total = 0\n    numShares = 0\n    for event in events:\n        if event[0] == \"buy\":\n            numShares += int(event[1])\n            total += int(event[1]) * int(event[2])\n        elif event[0] == \"sell\":\n            numShares -= int(event[1])\n            total -= int(event[1]) * int(event[2])\n        elif event[0] == \"split\":\n            numShares *= int(event[1])\n            total *= int(event[1])\n        elif event[0] == \"merge\": \n            numShares //= int(event[1])\n            total //= int(event[1])\n            if numShares % int(event[1]):\n                numShares -= numShares % int(event[1])\n                total -= total % int(event[1])\n        elif event[0] == \"die\":\n            total -= total * 0.3\n            total += numShares * int(event[1])\n    print(format(total, \".8f\"))\n\nif __name__ == \"__main__\":\n    main()\n", "\nimport sys\n\ndef main():\n    events = []\n    for line in sys.stdin:\n        args = line.split()\n        events.append(args)\n\n    shares_owned = 0\n    share_cost = 0.0\n    for event in events:\n        if event[0] == \"buy\":\n            shares_owned += int(event[1])\n            share_cost = (share_cost * (shares_owned - int(event[1])) +\n                          int(event[1]) * float(event[2])) / shares_owned\n        elif event[0] == \"sell\":\n            shares_owned -= int(event[1])\n        elif event[0] == \"split\":\n            shares_owned *= int(event[1])\n            share_cost /= int(event[1])\n        elif event[0] == \"merge\":\n            shares_owned = (shares_owned // int(event[1])) + (shares_owned %\n                                                               int(event[1]))\n            share_cost *= int(event[1])\n        elif event[0] == \"die\":\n            share_cost = float(event[1])\n            break\n\n    print(shares_owned * share_cost * (1 - 0.3))\n\nmain()\n", "\n\ndef main():\n    events = []\n    while True:\n        event = input().split()\n        if event[0] == \"die\":  # end of input\n            events.append(event)\n            break\n        else:  # add event to list\n            events.append(event)\n\n    stock = 0  # stock number\n    cost = 0  # average cost\n    for event in events:\n        if event[0] == \"buy\":  # buy stock\n            stock += int(event[1])\n            cost += int(event[1]) * int(event[2])\n        elif event[0] == \"sell\":  # sell stock\n            stock -= int(event[1])\n            cost -= int(event[1]) * int(event[2])\n        elif event[0] == \"split\":\n            stock *= int(event[1])\n            cost /= int(event[1])\n        elif event[0] == \"merge\":\n            stock = stock // int(event[1])\n            cost = cost * int(event[1])\n        elif event[0] == \"die\":\n            print(\"{:.8f}\".format(stock * int(event[1]) - stock * cost * 0.3))  # print result\n\nif __name__ == \"__main__\":\n    main()\n", "\n\ndef main():\n    shares = []\n    for i in range(int(input())):\n        temp = input().split()\n        if temp[0] == \"buy\":\n            shares.append(int(temp[1]) * int(temp[2]))\n        elif temp[0] == \"sell\":\n            shares.sort()\n            for j in range(int(temp[1])):\n                shares[j] = int(temp[2]) - shares[j]\n        elif temp[0] == \"split\":\n            temp2 = []\n            for j in shares:\n                temp2.append(j // int(temp[1]))\n            shares = temp2\n        elif temp[0] == \"merge\":\n            temp2 = []\n            for j in range(int(len(shares) // int(temp[1]))):\n                temp2.append(sum(shares[j * int(temp[1]):(j + 1) * int(temp[1])]))\n            if len(shares) % int(temp[1]) != 0:\n                temp2.append(sum(shares[int(len(shares) // int(temp[1])) * int(temp[1]):]))\n            shares = temp2\n        else:\n            shares = [int(temp[1]) - i for i in shares]\n    print(round(sum(shares) / len(shares), 2))\n\nmain()\n"]