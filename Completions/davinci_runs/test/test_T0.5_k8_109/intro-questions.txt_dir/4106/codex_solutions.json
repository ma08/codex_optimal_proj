["\n\nn, k, x = [int(x) for x in input().split()]\na = [int(x) for x in input().split()]\n\n# if x<k:\n#     print(-1)\n#     quit()\n\n# if x==k:\n#     print(sum(a))\n#     quit()\n\n# if x>k:\n#     dp = [[0 for i in range(n+1)] for j in range(x+1)]\n#     for i in range(n+1):\n#         for j in range(x+1):\n#             if i==0 or j==0:\n#                 dp[i][j]=0\n#             elif j<k:\n#                 dp[i][j]=dp[i-1][j]\n#             else:\n#                 dp[i][j]=max(dp[i-1][j], dp[i-1][j-k]+a[i-1])\n\n#     print(dp[n][x])\n\n# print(dp)\n\nif x < k:\n    print(-1)\nelse:\n    dp = [0]*(n+1)\n    for i in range(1, n+1):\n        dp[i] = max(dp[i-1], a[i-1]+dp[max(0, i-k)])\n    print(dp[n])", "\n\ndef find_max_beauty(n, k, x, a):\n    # if x < k, then we can't satisfy the condition\n    if x < k:\n        return -1\n    \n    # if x >= k, then we can satisfy the condition\n    # we can skip the first k-1 elements\n    beauty = sum(a[k-1:])\n    for i in range(k-1, n):\n        if a[i] > a[i-k]:\n            beauty += a[i] - a[i-k]\n    return beauty\n\n# n, k, x = map(int, input().split())\n# a = list(map(int, input().split()))\n\n# print(find_max_beauty(n, k, x, a))\n\nassert find_max_beauty(5, 2, 3, [5, 1, 3, 10, 1]) == 18\nassert find_max_beauty(6, 1, 5, [10, 30, 30, 70, 10, 10]) == -1\nassert find_max_beauty(4, 3, 1, [1, 100, 1, 1]) == 100", "\n\n# n,k,x = map(int,input().split())\n# a = list(map(int,input().split()))\n\nn,k,x = 4,3,1\na = [1,100,1,1]\n\ndef solve(n,k,x,a):\n    if x<k:\n        return -1\n    if x==k:\n        return sum(a[:x])\n    if x>k:\n        return max(sum(a[:k]),sum(a[k:x]))\n\nprint(solve(n,k,x,a))", "\n#------------------------------------------------------------------------------#\n\ndef solve(n, k, x, a):\n    if x < k:\n        return -1\n    if x == n:\n        return sum(a)\n\n    sum_a = [0] * n\n    sum_a[0] = a[0]\n    for i in range(1, n):\n        sum_a[i] = sum_a[i-1] + a[i]\n\n    max_sum = -1\n    for i in range(n):\n        if i + k - 1 >= n:\n            break\n        for j in range(i + k - 1, n):\n            if j - i + 1 - x >= 0:\n                break\n            sum_i = sum_a[i+k-1]\n            sum_j = sum_a[j]\n            if i > 0:\n                sum_i -= sum_a[i-1]\n            if j - i + 1 - x > 0:\n                sum_j -= sum_a[j - x]\n            if max_sum < sum_i + sum_j:\n                max_sum = sum_i + sum_j\n\n    return max_sum\n\n#------------------------------------------------------------------------------#\n\ndef main():\n    n, k, x = map(int, input().split())\n    a = list(map(int, input().split()))\n    print(solve(n, k, x, a))\n\nif __name__ == \"__main__\":\n    main()", "\n\n# Solution\n\nn, k, x = map(int, input().split())\na = list(map(int, input().split()))\n\ndp = [[0]*(x+1) for i in range(n+1)]\n\nfor i in range(1, n+1):\n    for j in range(1, x+1):\n        if i < j*k:\n            dp[i][j] = -1\n            continue\n        if j == 1:\n            dp[i][j] = sum(a[:i])\n        else:\n            dp[i][j] = max(dp[i-1][j], dp[i-k][j-1] + sum(a[i-k:i]))\n\nprint(dp[n][x])", "\nimport sys\n\ndef main():\n    n,k,x = map(int, sys.stdin.readline().split())\n    a = list(map(int, sys.stdin.readline().split()))\n\n    # if x < k:\n    #     print(-1)\n    #     return\n\n    # if k == 1:\n    #     print(sum(a))\n    #     return\n\n    # # if k == 2:\n    # #     print(max(a))\n    # #     return\n\n    # if k == 2:\n    #     if x == 2:\n    #         print(sum(a))\n    #         return\n    #     else:\n    #         print(max(a))\n    #         return\n\n    # if k == 3:\n    #     if x == 3:\n    #         print(sum(a))\n    #         return\n    #     else:\n    #         print(max(a))\n    #         return\n\nif __name__ == '__main__':\n    main()", "\n\nfrom typing import List\n\ndef max_beauty_sum(n: int, k: int, x: int, a: List[int]) -> int:\n    \"\"\"Return the maximum possible sum of values of reposted pictures if Vova follows conditions described in the problem statement.\n\n    :param n: the number of pictures in the news feed\n    :param k: the minimum length of segment with at least one repost in it\n    :param x: the number of pictures Vova is ready to repost\n    :param a: the beauty of the pictures\n    \"\"\"\n    min_beauty = min(a)\n    if x < k or a.count(min_beauty) < x:\n        return -1\n    if k == 1:\n        return sum(a)\n    beauty_sum = 0\n    for i in range(n):\n        if a[i] == min_beauty:\n            beauty_sum += min_beauty\n            x -= 1\n            if x == 0:\n                break\n    return beauty_sum\n\n\nif __name__ == \"__main__\":\n    n, k, x = [int(x) for x in input().split()]\n    a = [int(x) for x in input().split()]\n    print(max_beauty_sum(n, k, x, a))", "\n\ndef max_beauty(n, k, x, images):\n    beauty = 0\n    for i in range(n - k + 1):\n        if x > 0:\n            beauty += max(images[i:i + k])\n            x -= 1\n    if x > 0:\n        return -1\n    return beauty\n\n\nif __name__ == '__main__':\n    n, k, x = [int(x) for x in input().split()]\n    images = [int(x) for x in input().split()]\n    print(max_beauty(n, k, x, images))"]