["#!/usr/bin/env python3\n# -*- coding: utf-8 -*-\n# @Time    : 2020/4/18 16:42\n# @Author  : FebSun\n# @FileName: file.py\n# @Software: PyCharm\n\nimport sys\n\ndef main():\n    # read number of chars\n    n = int(sys.stdin.readline())\n    # read chars\n    s = sys.stdin.readline().strip()\n\n    # count number of a, b, c, ?\n    na = s.count('a')\n    nb = s.count('b')\n    nc = s.count('c')\n    nq = s.count('?')\n\n    # if there are no ? in s, check if there is a subsequence abc\n    if nq == 0:\n        if 'abc' in s:\n            print(1)\n        else:\n            print(0)\n        return\n\n    # if there are no a, b, c in s, count number of subsequences abc\n    if na == 0 and nb == 0 and nc == 0:\n        print(3 ** nq)\n        return\n\n    # prepare a list of possible positions of ?\n    qs = [i for i in range(n) if s[i] == '?']\n\n    # count number of subsequences abc\n    count = 0\n\n    for i in range(3 ** nq):\n        # replace ? with a, b, c\n        t = s\n        for j, q in enumerate(qs):\n            t = t[:q] + 'abc'[i // (3 ** (nq - j - 1)) % 3] + t[q + 1:]\n\n        # count number of subsequences abc\n        if 'abc' in t:\n            count += 1\n\n    # print result\n    print(count)\n\nif __name__ == '__main__':\n    main()\n", "\n\ndef solve(n, s):\n    \"\"\"\n    >>> solve(6, 'ac?b?c')\n    24\n    >>> solve(7, '???????')\n    2835\n    >>> solve(9, 'cccbbbaaa')\n    0\n    >>> solve(5, 'a???c')\n    46\n    \"\"\"\n    mod = int(1e9 + 7)\n    # dp[i][j] : number of subsequences ending at index i with character j\n    dp = [[0] * 3 for _ in range(n + 1)]\n    dp[0][0] = 1\n    for i in range(1, n + 1):\n        for j in range(3):\n            if s[i - 1] == '?':\n                for k in range(3):\n                    dp[i][k] += dp[i - 1][j]\n            elif 'a' <= s[i - 1] <= 'c':\n                dp[i][ord(s[i - 1]) - ord('a')] += dp[i - 1][j]\n        for j in range(3):\n            dp[i][j] %= mod\n    return sum(dp[n]) % mod\n\n\nif __name__ == '__main__':\n    n = int(input())\n    s = input()\n    print(solve(n, s))\n", "\n\n\ndef solve(n, s):\n    \"\"\"\n    >>> solve(6, 'ac?b?c')\n    24\n    >>> solve(7, '???????')\n    2835\n    >>> solve(9, 'cccbbbaaa')\n    0\n    >>> solve(5, 'a???c')\n    46\n    \"\"\"\n    mod = int(1e9 + 7)\n    # dp[i][j] : number of subsequences ending at index i with character j\n    dp = [[0] * 3 for _ in range(n + 1)]\n    dp[0][0] = 1\n    for i in range(1, n + 1):\n        for j in range(3):\n            if s[i - 1] == '?':\n                for k in range(3):\n                    dp[i][k] += dp[i - 1][j]\n            elif 'a' <= s[i - 1] <= 'c':\n                dp[i][ord(s[i - 1]) - ord('a')] += dp[i - 1][j]\n        for j in range(3):\n            dp[i][j] %= mod\n    return sum(dp[n]) % mod\n\n\nif __name__ == '__main__':\n    n = int(input())\n    s = input()\n    print(solve(n, s))\n", "#!/usr/bin/env python3\n\nimport sys\n\ndef main():\n    # read number of lines\n    n = int(sys.stdin.readline().strip())\n\n    # read lines\n    lines = []\n    for _ in range(n):\n        lines.append(sys.stdin.readline().strip())\n\n    # count number of lines\n    count = 0\n\n    for line in lines:\n        # count number of a, b, c, ?\n        na = line.count('a')\n        nb = line.count('b')\n        nc = line.count('c')\n        nq = line.count('?')\n\n        # if there are no ? in line, check if there is a subsequence abc\n        if nq == 0:\n            if 'abc' in line:\n                count += 1\n            continue\n\n        # if there are no a, b, c in line, count number of subsequences abc\n        if na == 0 and nb == 0 and nc == 0:\n            count += 3 ** nq\n            continue\n\n        # prepare a list of possible positions of ?\n        qs = [i for i in range(len(line)) if line[i] == '?']\n\n        # count number of subsequences abc\n        for i in range(3 ** nq):\n            # replace ? with a, b, c\n            t = line\n            for j, q in enumerate(qs):\n                t = t[:q] + 'abc'[i // (3 ** (nq - j - 1)) % 3] + t[q + 1:]\n\n            # count number of subsequences abc\n            if 'abc' in t:\n                count += 1\n\n    # print result\n    print(count)\n\nif __name__ == '__main__':\n    main()\n"]