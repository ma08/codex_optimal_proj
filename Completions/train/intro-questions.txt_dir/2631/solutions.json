["import itertools\n\nk, m = list(map(int,input().split()))\n\nmain_ar = []\nfor i in range(k):\n    ar = list(map(int,input().split()))\n    main_ar.append(ar[1:])\n\nall_combination = itertools.product(*main_ar)\nresult = 0\nfor single_combination in all_combination:   \n    result = max(sum([x*x for x in single_combination])%m,result)\nprint(result)\n", "#!/usr/bin/env python3\n\n\nfrom itertools import product\n\nK,M = list(map(int,input().split()))\nN = (list(map(int, input().split()))[1:] for _ in range(K))\nresults = [sum(i**2 for i in x)%M for x in product(*N)]\nprint((max(results)))\n\n\n\n\n"]