["n = int(input())\na = list(map(int, input().split()))\ng = [list() for _ in range(n)]\nfor _ in range(n-1):\n  u,v = list(map(int, input().split()))\n  g[u-1].append(v-1)\n  g[v-1].append(u-1)\nst = [x*2-1 for x in a] + [0]\np = [-1]*n\nq = [0]\nwhile q:\n  v = q.pop()\n  for x in g[v]:\n    if x == p[v]: continue\n    p[x] = v\n    q.append(x)\n      \nseen = [0]*n\nq = [0]\nwhile q:\n  v = q[-1]\n  if seen[v]:\n    q.pop()\n    if st[v] > 0:\n      st[p[v]] += st[v]\n  else:\n    for x in g[v]:\n      if x == p[v]: continue\n      q.append(x)\n    seen[v] = 1\n\nseen = [0]*n\nq = [0]\nwhile q:\n  v = q.pop()\n  for x in g[v]:\n    if x == p[v]: continue\n    c = st[v]\n    if st[x] > 0: c -= st[x]\n    if c > 0: st[x] += c\n    q.append(x)\n\nprint(*st[:n])\n", "import sys\n\n_INPUT_LINES = sys.stdin.read().splitlines()\ninput = iter(_INPUT_LINES).__next__\n\n\ndef go():\n    n = int(input())\n    # n, h, l, r = map(int, input().split())\n    a = list(map(int, input().split()))\n    e = {i: set() for i in range(n)}\n    for _ in range(n - 1):\n        u, v = list(map(int, input().split()))\n        u, v = u - 1, v - 1\n        e[u].add(v)\n        e[v].add(u)\n    ranks = [len(e[i]) for i in range(n)]\n    leafs = [i for i in range(n) if ranks[i] == 1]\n    index = 0\n    vs = {i: {} for i in range(n)}\n    done = set()\n    while index < len(leafs):\n        cur = leafs[index]\n        mysum = sum(vs[cur].values())\n\n        if a[cur] == 0:\n            mysum -= 1\n        else:\n            mysum += 1\n\n        for i in e[cur] - done:\n            vs[i][cur] = max(mysum, 0)\n            ranks[i] -= 1\n            if ranks[i] == 1:\n                leafs.append(i)\n        done.add(cur)\n        index += 1\n\n    sums = [0] * n\n    que = [ranks.index(0)]\n    done = set()\n    index = 0\n    while index < len(que):\n        cur = que[index]\n\n        mysum = sum(vs[cur].values())\n\n        if a[cur] == 0:\n            mysum -= 1\n        else:\n            mysum += 1\n\n        sums[cur] = mysum\n\n        for i in e[cur] - done:\n            vs[i][cur] = max(mysum - vs[cur][i], 0)\n            que.append(i)\n\n        done.add(cur)\n        index += 1\n\n    return ' '.join(map(str,sums))\n\n\n# t = int(input())\nfor _ in range(1):\n    print(go())\n"]