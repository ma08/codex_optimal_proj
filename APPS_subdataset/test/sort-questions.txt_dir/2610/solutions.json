["import os\nfrom io import BytesIO\n\n# input = BytesIO(os.read(0, os.fstat(0).st_size)).readline\n\n\ndef check(x, p):\n    i = x - 1\n    while i > -1 and a[i] <= p:\n        p -= a[i]\n        if i >= k - 1:\n            i -= k\n        else:\n            i -= 1\n    return i <= -1\n\n\nfor _ in range(int(input())):\n    n, p, k = map(int, input().split())\n    a = sorted(map(int, input().split()))\n    dp = [1000000000] * (n + 1)\n    dp[0] = 0\n    ans = 0\n    for i in range(1, n + 1):\n        dp[i] = dp[i - 1] + a[i - 1]\n        if i - k + 1 >= 0:\n            dp[i] = min(dp[i], dp[i - k] + a[i - 1])\n        if dp[i] <= p:\n            ans = i\n    print(ans)", "t = int(input())\nfor ii in range(t):\n    n, p, k = list(map(int, input().split()))\n    a = list(map(int, input().split()))\n    a = sorted(a)\n    a = [None] + a\n    s = [0] * (n+1)\n    last_ind = 0\n    for i in range(1,n+1):\n        if i < k:\n            s[i] = a[i] + s[i-1]\n        else:\n            s[i] = a[i] + s[i-k]\n        # print('---',s[i], p)\n        if s[i] <= p:\n            last_ind = i\n\n    print(last_ind)\n\n'''\n8\n5 6 2\n2 4 3 5 7\n5 11 2\n2 4 3 5 7\n3 2 3\n4 2 6\n5 2 3\n10 1 3 9 2\n2 10000 2\n10000 10000\n2 9999 2\n10000 10000\n4 6 4\n3 2 3 2\n5 5 3\n1 2 2 1 2\n\n'''\n", "import sys\ninput = sys.stdin.readline\n\nt=int(input())\nfor testcases in range(t):\n    n,p,k=list(map(int,input().split()))\n    A=sorted((list(map(int,input().split()))))\n\n    S=[0]*(n+k+3)\n\n    for i in range(k-1):\n        S[i]=A[i]+S[i-1]\n\n    for i in range(k-1,n):\n        S[i]=S[i-k]+A[i]\n\n    #print(S)\n\n    ANS=-1\n\n    for i in range(n):\n        if S[i]<=p:\n            ANS=i\n\n    print(ANS+1)\n\n    \n", "t = int(input())\n\nfor _ in range(t):\n    n,p,k = map(int, input().split())\n    a = list(map(int, input().split()))\n    a = sorted(a)\n\n    dp = [10**10 for i in range(n+1)]\n    dp[0] = 0\n\n    for i in range(1, n+1):\n        dp[i] = min(dp[i], dp[i-1] + a[i-1])\n        if i >= k:\n            dp[i] = min(dp[i], dp[i-k] + a[i-1])\n    ans = 0\n    for i in range(n+1):\n        if dp[i] <= p:\n            ans = i\n    print(ans)"]