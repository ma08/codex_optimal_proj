["\n\nimport sys\n\ndef main():\n    n, m = map(int, sys.stdin.readline().strip().split())\n    switches = [[] for _ in range(n)]\n    for i in range(m):\n        data = sys.stdin.readline().strip().split()\n        for j in range(1, len(data)):\n            switches[int(data[j]) - 1].append(i)\n    p = list(map(int, sys.stdin.readline().strip().split()))\n    ans = 0\n    for i in range(2**n):\n        light = True\n        for j in range(n):\n            if (i >> j) & 1:\n                for k in switches[j]:\n                    p[k] ^= 1\n        for j in range(m):\n            if p[j] == 1:\n                light = False\n        if light:\n            ans += 1\n        for j in range(n):\n            if (i >> j) & 1:\n                for k in switches[j]:\n                    p[k] ^= 1\n    print(ans)\n\nif __name__ == '__main__':\n    main()", "\n\nfrom collections import defaultdict\n\nN, M = map(int, input().split())\n\n# \u5404\u96fb\u7403\u306b\u5f71\u97ff\u3092\u4e0e\u3048\u308b\u30b9\u30a4\u30c3\u30c1\u306eid\u3092\u683c\u7d0d\u3059\u308b\n# key: bulb_id\n# value: [switch_id1, switch_id2, ...]\nbulb_id_to_switch_ids = defaultdict(list)\n\nfor bulb_id in range(1, M + 1):\n    switch_ids = list(map(int, input().split()))\n    bulb_id_to_switch_ids[bulb_id] = switch_ids[1:]\n\n# \u5404\u96fb\u7403\u306eon/off\u72b6\u614b\n# key: bulb_id\n# value: on/off\nbulb_id_to_state = {}\nfor bulb_id in range(1, M + 1):\n    state = int(input())\n    bulb_id_to_state[bulb_id] = state\n\n# \u5404\u30b9\u30a4\u30c3\u30c1\u306b\u5f71\u97ff\u3092\u53d7\u3051\u308b\u96fb\u7403\u306eid\u3092\u683c\u7d0d\u3059\u308b\n# key: switch_id\n# value: [bulb_id1, bulb_id2, ...]\nswitch_id_to_bulb_ids = defaultdict(list)\n\nfor bulb_id, switch_ids in bulb_id_to_switch_ids.items():\n    for switch_id in switch_ids:\n        switch_id_to_bulb_ids[switch_id].append(bulb_id)\n\n# \u5168\u3066\u306e\u30b9\u30a4\u30c3\u30c1\u306e\u72b6\u614b\u3092\u683c\u7d0d\u3059\u308b\n# key: switch_id\n# value: on/off\nswitch_id_to_state = {}\nfor switch_id in range(1, N + 1):\n    # \u5168\u3066\u306e\u30b9\u30a4\u30c3\u30c1\u306f\u6700\u521d\u306foff\u306b\u3057\u3066\u304a\u304f\n    switch_id_to_state[switch_id] = 'off'\n\n# \u5168\u3066\u306e\u30b9\u30a4\u30c3\u30c1\u306e\u72b6\u614b\u3092\u63a2\u7d22\u3059\u308b\n# \u5168\u3066\u306e\u30b9\u30a4\u30c3\u30c1\u306e\u72b6\u614b\u306f\u3001\n# on: 0\n# off: 1\n# \u3068\u3057\u3066\u6271\u3046\n# \u5168\u3066\u306e\u30b9\u30a4\u30c3\u30c1\u306e\u72b6\u614b\u3092\u8868\u73fe\u3059\u308b\u6570\u5024\u306f\u30010\u304b\u30892^N - 1\u307e\u3067\u306e\u5024\u3092\u53d6\u308b\nfor switch_state_num in range(2 ** N):\n    # \u5404\u30b9\u30a4\u30c3\u30c1\u306e\u72b6\u614b\u3092\u6c7a\u3081\u308b\n    for switch_id in range(1, N + 1):\n        # switch_id\u306e\u30d3\u30c3\u30c8\u304c1\u304b\u3069\u3046\u304b\u3092\u8abf\u3079\u308b\n        if switch_state_num & (1 << switch_id - 1):\n            switch_id_to_state[switch_id] = 'off'\n        else:\n            switch_id_to_state[switch_id] = 'on'\n\n    # \u5168\u3066\u306e\u96fb\u7403\u3092\u70b9\u706f\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u304b\u3092\u8abf\u3079\u308b\n    # \u5168\u3066\u306e\u96fb\u7403\u304c\u70b9\u706f\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u6b21\u306e\u30b9\u30a4\u30c3\u30c1\u306e\u72b6\u614b\u3092\u8abf\u3079\u308b\n    # \u70b9\u706f\u3057\u3066\u3044\u306a\u3044\u96fb\u7403\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u3053\u306e\u30b9\u30a4\u30c3\u30c1\u306e\u72b6\u614b\u306f\u30c0\u30e1\u306a\u306e\u3067\u3001\u6b21\u306e\u30b9\u30a4\u30c3\u30c1\u306e\u72b6\u614b\u3092\u8abf\u3079\u308b\n    for bulb_id in range(1, M + 1):\n        bulb_state = bulb_id_to_state[bulb_id]\n        switch_ids = bulb_id_to_switch_ids[bulb_id]\n        on_switch_num = 0\n        for switch_id in switch_ids:\n            switch_state = switch_id_to_state[switch_id]\n            if switch_state == 'on':\n                on_switch_num += 1\n\n        if bulb_state == 0 and on_switch_num % 2 != 0:\n            break\n        elif bulb_state == 1 and on_switch_num % 2 != 1:\n            break\n    else:\n        # \u5168\u3066\u306e\u96fb\u7403\u304c\u70b9\u706f\u3057\u3066\u3044\u308b\u5834\u5408\n        # \u5168\u3066\u306e\u30b9\u30a4\u30c3\u30c1\u306e\u72b6\u614b\u3092\u8868\u793a\u3059\u308b\n        print('switch_state_num:', switch_state_num)\n        for switch_id in range(1, N + 1):\n            print(switch_id, switch_id_to_state[switch_id])\n        print()"]