["f,g=lambda X:[list(x) for x in zip(*X[::-1])],lambda X:[list(x) for x in zip(*X)][::-1]\n\ndef ROTF(U,L,F,R,B,D):\n    U[2],(L[0][2],L[1][2],L[2][2]),(R[0][0],R[1][0],R[2][0]),D[0]=([L[0][2],L[1][2],L[2][2]][::-1],list(D[0]),list(U[2]),[R[0][0],R[1][0],R[2][0]][::-1])\n    return (U,L,f(F),R,B,D)\n    \ndef ROTS(U,L,F,R,B,D):\n    U[1],(L[0][1],L[1][1],L[2][1]),(R[0][1],R[1][1],R[2][1]),D[1]=([L[0][1],L[1][1],L[2][1]][::-1],list(D[1]),list(U[1]),[R[0][1],R[1][1],R[2][1]][::-1])\n    return (U,L,F,R,B,D)\n\ndef perform(a):\n    c=\"yyyyyyyyybbbbbbbbbrrrrrrrrrgggggggggooooooooowwwwwwwww\"\n    U,L,F,R,B,D=([list(c[9*i:9*i+9][j*3:j*3+3]) for j in range(3)]for i in range(6))\n    \n    A=[]\n    for x in a.replace(\"'\",'3').split():A+=[x[0]]*int(x[1])if len(x)==2else [x]\n    \n    T=[]\n    W='FS YYYFY YYYFSY YFYYY YFSYYY YYFYY YYFSYY XFXXX XFSXXX XXXFX XXXFSX YYYSY XSXXX'\n    for x in A:T+={k:list(v) for k,v in zip('fLlRrBbDdUuME',W.split())}.get(x,x)\n    \n    for X in T:\n        if X=='X':(U,L,F,R,B,D)=(F,g(L),D,f(R),g(g(U)),g(g(B)))\n        if X=='Y':(U,L,F,R,B,D)=(f(U),F,R,B,L,g(D))\n        if X=='Z':(U,L,F,R,B,D)=(f(L),f(D),f(F),f(U),g(B),f(R))\n        if X=='F':(U,L,F,R,B,D)=ROTF(U,L,F,R,B,D)\n        if X=='S':(U,L,F,R,B,D)=ROTS(U,L,F,R,B,D)\n    return ''.join(''.join(''.join(y)for y in x)for x in(U,L,F,R,B,D))", "def ROTF(U,L,F,R,B,D):\n    F=[list(x) for x in zip(*F[::-1])]\n    \n    u=list(U[2])\n    l=[L[0][2],L[1][2],L[2][2]]\n    r=[R[0][0],R[1][0],R[2][0]]\n    d=list(D[0])\n    \n    U[2]=l[::-1]\n    L[0][2],L[1][2],L[2][2]=d\n    R[0][0],R[1][0],R[2][0]=u\n    D[0]=r[::-1]\n    return (U,L,F,R,B,D)\n    \ndef ROTS(U,L,F,R,B,D):\n    \n    u=list(U[1])\n    l=[L[0][1],L[1][1],L[2][1]]\n    r=[R[0][1],R[1][1],R[2][1]]\n    d=list(D[1])\n    \n    U[1]=l[::-1]\n    L[0][1],L[1][1],L[2][1]=d\n    R[0][1],R[1][1],R[2][1]=u\n    D[1]=r[::-1]\n    return (U,L,F,R,B,D)\n\ndef perform(a):\n    c=\"yyyyyyyyybbbbbbbbbrrrrrrrrrgggggggggooooooooowwwwwwwww\"\n    U,L,F,R,B,D=([list(c[9*i:9*i+9][j*3:j*3+3]) for j in range(3)]for i in range(6))\n    \n    A=[]\n    \n    for x in a.replace(\"'\",'3').split():\n        if len(x)==2:A+=[x[0]]*int(x[1])\n        else:A+=[x]\n    \n    TMP=[]\n    for x in A:\n        if x=='L':TMP+=list('YYYFY')\n        if x=='l':TMP+=list('YYYFSY')\n        if x=='R':TMP+=list('YFYYY')\n        if x=='r':TMP+=list('YFSYYY')\n        if x=='B':TMP+=list('YYFYY')\n        if x=='b':TMP+=list('YYFSYY')\n        if x=='D':TMP+=list('XFXXX')\n        if x=='d':TMP+=list('XFSXXX')\n        if x=='U':TMP+=list('XXXFX')\n        if x=='u':TMP+=list('XXXFSX')\n        if x=='M':TMP+=list('YYYSY')\n        if x=='E':TMP+=list('XSXXX')\n        else:TMP+=[x]\n    A=TMP[:]\n    \n    for X in A:\n        if X=='F':(U,L,F,R,B,D)=ROTF(U,L,F,R,B,D)\n        if X=='S':(U,L,F,R,B,D)=ROTS(U,L,F,R,B,D)\n        if X=='f':\n            (U,L,F,R,B,D)=ROTF(U,L,F,R,B,D)\n            (U,L,F,R,B,D)=ROTS(U,L,F,R,B,D)\n        if X=='Z':\n            (U,L,D,R)=(L,D,R,U)\n            F=[list(x) for x in zip(*F[::-1])]\n            B=[list(x) for x in zip(*B)][::-1]\n            \n            U=[list(x) for x in zip(*U[::-1])]\n            L=[list(x) for x in zip(*L[::-1])]\n            R=[list(x) for x in zip(*R[::-1])]\n            D=[list(x) for x in zip(*D[::-1])]\n        if X=='X':\n            (U,F,D,B)=(F,D,B,U)\n            L=[list(x) for x in zip(*L)][::-1]\n            R=[list(x) for x in zip(*R[::-1])]\n            \n            B=[list(x) for x in zip(*B)][::-1]\n            B=[list(x) for x in zip(*B)][::-1]\n            D=[list(x) for x in zip(*D)][::-1]\n            D=[list(x) for x in zip(*D)][::-1]\n        if X=='Y':\n            (L,F,R,B)=(F,R,B,L)\n            U=[list(x) for x in zip(*U[::-1])]\n            D=[list(x) for x in zip(*D)][::-1]\n        \n        z=''.join(''.join(''.join(y)for y in x)for x in (U,L,F,R,B,D))\n    return z"]