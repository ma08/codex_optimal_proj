["from operator import itemgetter\nimport sys\ninput = sys.stdin.readline\n\nMAX_A = 200\nt = int(input())\n\nfor _ in range(t):\n    n = int(input())\n    a = list(map(int, input().split()))\n    \n    ruiseki = [[0] * MAX_A for i in range(n + 1)]\n    for i in range(n):\n        for j in range(MAX_A):\n            ruiseki[i + 1][j] = ruiseki[i][j]\n            if a[i] - 1 == j:\n                ruiseki[i + 1][j] += 1\n\n    ans = 0\n    for num in set(a):\n        l = 0\n        r = n - 1\n        cnt = 0\n        while True:\n            while True:\n                if a[l] != num:\n                    l += 1\n                else:\n                    break\n            while True:\n                if a[r] != num:\n                    r -= 1\n                else:\n                    break\n            if l == r:\n                ans = max(ans, cnt + 1)\n                break\n            elif l > r:\n                break\n            cnt += 1\n            tmp_max = 0\n            for j in range(MAX_A):\n                tmp_max = max(tmp_max, ruiseki[r][j] - ruiseki[l + 1][j])\n            ans = max(ans, cnt * 2 + tmp_max)\n            l += 1\n            r -= 1\n    print(ans)"]