["t=int(input())\nfor k in range(t):\n    n=int(input())\n    l=[int(i) for i in input().split()]\n    m={}\n    count=1\n    for i in range(1,n):\n        if l[i]==l[i-1]:\n            count+=1\n        else:\n            \n            if l[i-1] not in m:\n                m[l[i-1]]=(count*(count+1))/2\n            else:\n                \n                m[l[i-1]]+=(count*(count+1))/2\n            count=1\n    if(l[n-1]) not in m:\n        m[l[n-1]]=(count*(count+1))/2\n    else:\n        \n        m[l[n-1]]+=(count*(count+1))/2\n    s=1\n    \n    for x in m:\n        \n         s=(s*m[x])%(1000000007)\n    print(s)\n    \n"]