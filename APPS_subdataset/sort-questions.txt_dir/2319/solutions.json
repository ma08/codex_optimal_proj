["import sys\nreadline = sys.stdin.readline\n\nT = int(readline())\nMOD =  998244353\nAns = [None]*T\nfor qu in range(T):\n    N, K = map(int, readline().split())\n    A = [0] + list(map(int, readline().split())) + [0]\n    B = list(map(int, readline().split()))\n    C = [None]*(N+1)\n    for i in range(1, N+1):\n        C[A[i]] = i\n    ans = 1\n    for b in B[::-1]:\n        bi = C[b]\n        res = 0\n        if A[bi-1]:\n            res += 1\n        if A[bi+1]:\n            res += 1\n        A[bi] = 0\n        ans = ans*res%MOD\n    Ans[qu] = ans\nprint('\\n'.join(map(str, Ans))) ", "import sys\ninput = sys.stdin.readline\n\nmod=998244353\n\nt=int(input())\nfor tests in range(t):\n    n,k=list(map(int,input().split()))\n    A=list(map(int,input().split()))\n    B=list(map(int,input().split()))\n\n    X=[-1]*(n+1)\n    for i in range(n):\n        X[A[i]]=i\n\n    for i in range(k):\n        B[i]=X[B[i]]\n\n    Y=[0]*n\n    for b in B:\n        Y[b]=1\n        \n    Y.append(1)\n\n    #print(Y)\n    #print(B)\n\n    ANS=0\n    for b in B:\n        #print(b,Y)\n        if Y[b-1]==1 and Y[b+1]==1:\n            print(0)\n            break\n\n        elif Y[b-1]==0 and Y[b+1]==0:\n            ANS+=1\n\n        Y[b]=0\n\n    else:\n        print(pow(2,ANS,mod))\n\n    \n", "import sys\ninput = sys.stdin.readline\nt = int(input())\nfor _ in range(t):\n    n, k = list(map(int, input().split()))\n    a = list(map(int, input().split()))\n    r = [0] * n\n    for i in range(n):\n        r[a[i] - 1] = i\n    b = list(map(int, input().split()))\n    d = [0] * n\n    for i in range(k):\n        d[b[i] - 1] = 1\n    cnt = 0\n    for i in range(k):\n        idx = r[b[i] - 1]\n        t = 0\n        if idx > 0 and d[a[idx - 1] - 1] == 0:\n            t += 1\n        if idx < n - 1 and d[a[idx + 1] - 1] == 0:\n            t += 1\n        if t == 0:\n            print(0)\n            break\n        elif t == 2:\n            cnt += 1\n        d[b[i] - 1] = 0\n    else:\n        print(pow(2, cnt, 998244353))\n", "import sys\nfrom sys import stdin\n\n\ntt = int(stdin.readline())\nmod = 998244353\n\nfor loop in range(tt):\n\n    n,k = map(int,stdin.readline().split())\n    a = list(map(int,stdin.readline().split()))\n    b = list(map(int,stdin.readline().split()))\n\n    l = [None] * (n+1)\n    r = [None] * (n+1)\n    use = [True] * (n+1)\n    for i in b:\n        use[i] = False\n    for i in range(n):\n        if i != n-1:\n            l[a[i]] = a[i+1]\n        if i != 0:\n            r[a[i]] = a[i-1]\n\n    ans = 1\n    for i in range(k):\n        now = 0\n        if l[b[i]] != None and use[l[b[i]]]:\n            now += 1\n        if r[b[i]] != None and use[r[b[i]]]:\n            now += 1\n        ans *= now\n        ans %= mod\n\n        if l[b[i]] != None:\n            r[l[b[i]]] = r[b[i]]\n        if r[b[i]] != None:\n            l[r[b[i]]] = l[b[i]]\n\n    print (ans % mod)"]